let global = 10;

let nothing = fn(v: u32): u32 { v };

let print = fn(s: []u8) {
    let printf = extern fn(s: *u8, ..): c_int @ "printf";
    let res = printf("%.*s\n\x00".ptr as _, s.len, s.ptr);
};

let rand = fn(): c_long {
    let random = extern fn(): c_long @ "random";
    random()
};

let main = fn() {
    let a = 5;
    let b = 6;
    let c = a + b + global;
    let d = nothing(3);
    let printf = extern fn(s: *u8, ..): c_int @ "printf";
    _ = printf("num: %l\n\x00".ptr as _, rand());
    if rand() > 1073741823 {
        print("Hello, world!");
    };
};
